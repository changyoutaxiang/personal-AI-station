@import "tailwindcss";
@import "../styles/design-tokens.css";
@import "../styles/enhanced-animations.css";
@import "../styles/modern-effects.css";
@import "../styles/accessibility-optimization.css";

:root {
  /* 标签颜色（亮色默认） */
  --tag-blue-bg: rgba(59, 130, 246, 0.15);
  --tag-blue-border: rgba(59, 130, 246, 0.35);
  --tag-blue-text: #1e3a8a; /* 深蓝 */

  --tag-green-bg: rgba(16, 185, 129, 0.15);
  --tag-green-border: rgba(16, 185, 129, 0.35);
  --tag-green-text: #065f46; /* 深绿 */

  --tag-red-bg: rgba(239, 68, 68, 0.15);
  --tag-red-border: rgba(239, 68, 68, 0.35);
  --tag-red-text: #7f1d1d; /* 深红 */

  --tag-purple-bg: rgba(139, 92, 246, 0.15);
  --tag-purple-border: rgba(139, 92, 246, 0.35);
  --tag-purple-text: #4c1d95; /* 深紫 */

  --tag-yellow-bg: rgba(234, 179, 8, 0.15);
  --tag-yellow-border: rgba(234, 179, 8, 0.35);
  --tag-yellow-text: #713f12; /* 深黄褐 */

  --tag-orange-bg: rgba(249, 115, 22, 0.15);
  --tag-orange-border: rgba(249, 115, 22, 0.35);
  --tag-orange-text: #7c2d12; /* 深橙 */
  /* 能耗控制变量 - Phase 2 增强效果 */
  --animation-duration-multiplier: 1;
  --blur-intensity: 20px;
  --shadow-intensity: 1.2;
  --enable-particles: 1;
  --enable-hover-effects: 1;
  --animation-play-state: running;
  
  /* 新增材质质感变量 */
  --glass-opacity: 0.85;
  --glass-border-opacity: 0.3;
  --surface-highlight: rgba(255, 255, 255, 0.4);
  --depth-shadow: rgba(0, 0, 0, 0.1);
  --material-glow: rgba(14, 165, 233, 0.2);
  
  /* 背景和前景色 - 中性明亮模式 */
  --background: #ffffff;
  --foreground: #0f172a;
  
  /* 主题色彩变量 - 冷色调 */
  --primary-50: #f0f9ff;
  --primary-100: #e0f2fe;
  --primary-200: #bae6fd;
  --primary-300: #7dd3fc;
  --primary-400: #38bdf8;
  --primary-500: #0ea5e9;
  --primary-600: #0284c7;
  --primary-700: #0369a1;
  --primary-800: #075985;
  --primary-900: #0c4a6e;
  --primary-950: #082f49;

  /* 动态色彩变量 - 冷色调 */
  --dynamic-primary: #0ea5e9;
  --dynamic-secondary: #0284c7;
  --dynamic-accent: #7dd3fc;
  --dynamic-glow: rgba(14, 165, 233, 0.3);
  --dynamic-pulse: rgba(2, 132, 199, 0.2);
  
  /* 思维流动主题色彩系统 - 冷色调 */
  --mind-flow-primary: linear-gradient(135deg, #0ea5e9 0%, #06b6d4 100%);
  --mind-flow-secondary: linear-gradient(135deg, #38bdf8 0%, #22d3ee 100%);
  --mind-flow-accent: linear-gradient(135deg, #0284c7 0%, #0891b2 100%);
  --mind-flow-neutral: linear-gradient(135deg, #64748b 0%, #475569 100%);
  
  /* 思维卡片背景 - 明亮模式 */
  --card-glass: rgba(240, 249, 255, 0.9);
  --card-border: rgba(14, 165, 233, 0.3);
  --card-shadow: 0 8px 32px 0 rgba(14, 165, 233, 0.15);
  
  /* 动态色彩 - 增强饱和度 */
  --flow-primary: #0ea5e9;
  --flow-secondary: #0284c7;
  --flow-accent: #7dd3fc;
  --flow-neutral: #64748b;
  --flow-blue: #0ea5e9;
  --flow-cyan: #06b6d4;
  --flow-sky: #38bdf8;
  --flow-teal: #14b8a6;
  --flow-indigo: #6366f1;
  --flow-slate: #64748b;
  
  /* 新增温暖色调作为点缀 */
  --flow-orange: #ff9f43;
  --flow-coral: #ff6b6b;
  --flow-amber: #ffd93d;
  --flow-rose: #ff6b9d;
  
  /* 文字颜色变量 - 明亮模式 */
  --text-primary: #0c1420;
  --text-secondary: #1e2a3a;
  --text-muted: #374151;
  --text-accent: #0891b2;
  --text-success: #047857;
  --text-warning: #b45309;
  --text-error: #b91c1c;
  --text-on-primary: #ffffff;

  /* Dopamine palette (仅供映射复用) */
  --dopamine-orange: #FF6B47;     /* 处理器卡片/Primary */
  --dopamine-green: #00D084;      /* 内存卡片/Success */
  --dopamine-light-green: #8FD14F;/* 存储卡片/Accent-2 */
  --dopamine-indigo: #6366F1;     /* 连接卡片/Info */
  --dopamine-yellow: #FFD700;     /* 紧凑设计卡片/Warning */

  /* Dopamine 组合色彩与 HSL 三元值 */
  --dopamine-orange-h: 14; --dopamine-orange-s: 100%; --dopamine-orange-l: 64%;
  --dopamine-green-h: 162; --dopamine-green-s: 100%; --dopamine-green-l: 41%;
  --dopamine-light-green-h: 86; --dopamine-light-green-s: 60%; --dopamine-light-green-l: 57%;
  --dopamine-indigo-h: 239; --dopamine-indigo-s: 84%; --dopamine-indigo-l: 67%;
  --dopamine-yellow-h: 51; --dopamine-yellow-s: 100%; --dopamine-yellow-l: 50%;
  
  /* 预计算 RGB 值（性能优化） */
  --dopamine-orange-rgb: 255, 107, 71;
  --dopamine-green-rgb: 0, 208, 132;
  --dopamine-light-green-rgb: 143, 209, 79;
  --dopamine-indigo-rgb: 99, 102, 241;
  --dopamine-yellow-rgb: 255, 215, 0;
}

/* 默认主题 - 夜间模式 */
[data-color-scheme="dark"] {
  /* 标签颜色（暗色模式） */
  --tag-blue-bg: rgba(59, 130, 246, 0.20);
  --tag-blue-border: rgba(96, 165, 250, 0.30);
  --tag-blue-text: rgba(191, 219, 254, 1);

  --tag-green-bg: rgba(34, 197, 94, 0.20);
  --tag-green-border: rgba(74, 222, 128, 0.30);
  --tag-green-text: rgba(187, 247, 208, 1);

  --tag-red-bg: rgba(239, 68, 68, 0.20);
  --tag-red-border: rgba(248, 113, 113, 0.30);
  --tag-red-text: rgba(254, 202, 202, 1);

  --tag-purple-bg: rgba(168, 85, 247, 0.20);
  --tag-purple-border: rgba(196, 181, 253, 0.30);
  --tag-purple-text: rgba(233, 213, 255, 1);

  --tag-yellow-bg: rgba(234, 179, 8, 0.20);
  --tag-yellow-border: rgba(234, 179, 8, 0.30);
  --tag-yellow-text: rgba(254, 240, 138, 1);

  --tag-orange-bg: rgba(249, 115, 22, 0.20);
  --tag-orange-border: rgba(251, 146, 60, 0.30);
  --tag-orange-text: rgba(254, 215, 170, 1);
  /* 背景和前景色 - 冷色调夜间模式 */
  --background: linear-gradient(135deg, #0f172a 0%, #1e293b 30%, #334155 70%, #475569 100%);
  --foreground: #f1f5f9;
  
  /* 思维卡片背景 - 夜间模式 */
  --card-glass: rgba(255, 255, 255, 0.08);
  --card-border: rgba(14, 165, 233, 0.3);
  --card-shadow: 0 8px 32px 0 rgba(14, 165, 233, 0.2);
  
  /* 文字颜色变量 - 夜间模式 */
  --text-primary: #f1f5f9;
  --text-secondary: #cbd5e1;
  --text-muted: #94a3b8;
  --text-accent: #38bdf8;
  --text-success: #22c55e;
  --text-warning: #f59e0b;
  --text-error: #ef4444;
  --text-on-primary: #ffffff;
}

/* 温暖主题 - 粉紫色系 */
[data-theme="warm"] {
  /* 明亮模式 */
  --background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 30%, #f5d0fe 70%, #fce7f3 100%);
  --foreground: #1f2937;
  
  /* 主题色彩变量 - 粉紫色系 */
  --primary-50: #fdf4ff;
  --primary-100: #fae8ff;
  --primary-200: #f5d0fe;
  --primary-300: #f0abfc;
  --primary-400: #e879f9;
  --primary-500: #d946ef;
  --primary-600: #c026d3;
  --primary-700: #a21caf;
  --primary-800: #86198f;
  --primary-900: #701a75;
  --primary-950: #4a044e;

  /* 动态色彩变量 - 粉紫色系 */
  --dynamic-primary: #d946ef;
  --dynamic-secondary: #c026d3;
  --dynamic-accent: #f0abfc;
  --dynamic-glow: rgba(217, 70, 239, 0.3);
  --dynamic-pulse: rgba(192, 38, 211, 0.2);

  /* 思维流动主题色彩系统 - 粉紫色系 */
  --mind-flow-primary: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
  --mind-flow-secondary: linear-gradient(135deg, #a78bfa 0%, #f472b6 100%);
  --mind-flow-accent: linear-gradient(135deg, #7c3aed 0%, #db2777 100%);
  --mind-flow-neutral: linear-gradient(135deg, #9ca3af 0%, #6b7280 100%);
  
  /* 动态色彩 - 温暖色调 */
  --flow-primary: #d946ef;
  --flow-secondary: #c026d3;
  --flow-accent: #f0abfc;
  --flow-neutral: #9ca3af;
  --flow-blue: #d946ef;
  --flow-cyan: #ec4899;
  --flow-sky: #f0abfc;
  --flow-teal: #a78bfa;
  --flow-indigo: #7c3aed;
  --flow-slate: #9ca3af;
  
  /* 思维卡片背景 - 明亮模式 */
  --card-glass: rgba(255, 255, 255, 0.8);
  --card-border: rgba(0, 0, 0, 0.1);
  --card-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
  
  /* 文字颜色变量 - 明亮模式 */
  --text-primary: #111827;
  --text-secondary: #374151;
  --text-muted: #4b5563;
  --text-accent: #d946ef;
  --text-success: #047857;
  --text-warning: #b45309;
  --text-error: #b91c1c;
  --text-on-primary: #ffffff;
}

/* 温暖主题 - 夜间模式 */
[data-theme="warm"][data-color-scheme="dark"] {
  --background: linear-gradient(135deg, #1f1a1f 0%, #2d1a2d 30%, #4a1a4a 70%, #2d1a2d 100%);
  --foreground: #f1f5f9;
  
  /* 夜间模式调整 */
  --card-glass: rgba(15, 23, 42, 0.85);
  --card-border: rgba(255, 255, 255, 0.15);
  --card-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
  
  /* 文字颜色 - 夜间模式 */
  --text-primary: #f1f5f9;
  --text-secondary: #cbd5e1;
  --text-muted: #94a3b8;
  --text-accent: #f0abfc;
  --text-success: #22c55e;
  --text-warning: #f59e0b;
  --text-error: #ef4444;
  --text-on-primary: #ffffff;
}



/* 科技未来主题 - 明亮模式 */
[data-theme="cyber"] {
  /* 背景和前景色 - 科技明亮 */
  --background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 25%, #bae6fd 50%, #7dd3fc 75%, #f0f9ff 100%);
  --foreground: #0f172a;
  
  /* 主题色彩变量 - 青色系 */
  --primary-50: #ecfeff;
  --primary-100: #cffafe;
  --primary-200: #a5f3fc;
  --primary-300: #67e8f9;
  --primary-400: #22d3ee;
  --primary-500: #06b6d4;
  --primary-600: #0891b2;
  --primary-700: #0e7490;
  --primary-800: #155e75;
  --primary-900: #164e63;
  --primary-950: #083344;

  /* 动态色彩变量 - 科技明亮 */
  --dynamic-primary: #0891b2;
  --dynamic-secondary: #06b6d4;
  --dynamic-accent: #22d3ee;
  --dynamic-glow: rgba(8, 145, 178, 0.3);
  --dynamic-pulse: rgba(6, 182, 212, 0.2);

  /* 思维流动主题色彩系统 */
  --mind-flow-primary: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);
  --mind-flow-secondary: linear-gradient(135deg, #22d3ee 0%, #67e8f9 100%);
  --mind-flow-accent: linear-gradient(135deg, #0e7490 0%, #155e75 100%);
  --mind-flow-neutral: linear-gradient(135deg, #64748b 0%, #475569 100%);
  
  /* 思维卡片背景 - 明亮模式 */
  --card-glass: rgba(240, 249, 255, 0.85);
  --card-border: rgba(6, 182, 212, 0.4);
  --card-shadow: 0 8px 32px rgba(6, 182, 212, 0.15);
  
  /* 动态色彩 */
  --flow-primary: #0891b2;
  --flow-secondary: #06b6d4;
  --flow-accent: #22d3ee;
  --flow-neutral: #64748b;
  --flow-blue: #0284c7;
  --flow-cyan: #0891b2;
  --flow-sky: #0ea5e9;
  --flow-teal: #14b8a6;
  --flow-indigo: #6366f1;
  --flow-slate: #64748b;
  
  /* 文字颜色变量 - 明亮模式 */
  --text-primary: #0c1420;
  --text-secondary: #000000;
  --text-muted: #374151;
  --text-accent: #0891b2;
  --text-success: #047857;
  --text-warning: #b45309;
  --text-error: #b91c1c;
  --text-on-primary: #ffffff;
}

/* 科技未来主题 - 夜间模式 */
[data-theme="cyber"][data-color-scheme="dark"] {
  --background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #0a0a0f 100%);
  --foreground: #e0f2fe;
  
  /* 夜间模式调整 */
  --card-glass: rgba(15, 23, 42, 0.85);
  --card-border: rgba(34, 211, 238, 0.3);
  --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 0 20px rgba(34, 211, 238, 0.1);
  
  /* 文字颜色 - 夜间模式 */
  --text-primary: #e0f2fe;
  --text-secondary: #a5f3fc;
  --text-muted: #67e8f9;
  --text-accent: #22d3ee;
  --text-success: #22c55e;
  --text-warning: #f59e0b;
  --text-error: #ef4444;
  --text-on-primary: #ffffff;
}

/* 科技未来主题专用导航按钮样式强化 */
[data-theme="cyber"] header button {
  background: rgba(255, 255, 255, 0.98) !important;
  color: #000000 !important;
  text-shadow: none !important;
  font-weight: 600 !important;
  border: 1px solid rgba(6, 182, 212, 0.5) !important;
}

[data-theme="cyber"] header button:hover {
  background: rgba(255, 255, 255, 1) !important;
  color: #000000 !important;
  border: 1px solid rgba(6, 182, 212, 0.7) !important;
}

/* 激活按钮保持原样 */
[data-theme="cyber"] header button.shadow-lg {
  background: var(--flow-primary) !important;
  color: white !important;
}

/* 自然森林主题 - 明亮模式 */
[data-theme="forest"] {
  /* 背景与前景 - 自然米白+轻微绿调 */
  --background: linear-gradient(135deg, #fafaf7 0%, #f7fbf7 33%, #f2f8f4 100%);
  --foreground: #0f1a14;

  /* 主题色彩变量 - 森林绿系 */
  --primary-50:  #f4fbf6;
  --primary-100: #e9f7ee;
  --primary-200: #d3efe0;
  --primary-300: #b8e3cd;
  --primary-400: #90d3b3;
  --primary-500: #4fbf8c;
  --primary-600: #3a9e74;
  --primary-700: #2f7f60;
  --primary-800: #27664f;
  --primary-900: #1f4f3f;
  --primary-950: #0f2f24;

  /* 动态色彩变量 - 品牌/交互 */
  --dynamic-primary: #2f7f60; /* 森林绿 */
  --dynamic-secondary: #6b8e62; /* 橄榄绿 */
  --dynamic-accent: #a8e6cf;   /* 薄荷绿 */
  --dynamic-glow: rgba(47, 127, 96, 0.3);
  --dynamic-pulse: rgba(107, 142, 98, 0.2);

  /* 思维流动主题梯度 */
  --mind-flow-primary:   linear-gradient(135deg, #2f7f60 0%, #6b8e62 100%);
  --mind-flow-secondary: linear-gradient(135deg, #79cfa8 0%, #a8e6cf 100%);
  --mind-flow-accent:    linear-gradient(135deg, #27664f 0%, #6b8e62 100%);
  --mind-flow-neutral:   linear-gradient(135deg, #9aa19a 0%, #7a8076 100%);

  /* 思维卡片材质 */
  --card-glass: rgba(248, 252, 249, 0.9);
  --card-border: rgba(47, 127, 96, 0.25);
  --card-shadow: 0 8px 32px rgba(47, 127, 96, 0.12);

  /* 动态色彩 - 调和映射 */
  --flow-primary: #2f7f60;
  --flow-secondary: #6b8e62;
  --flow-accent: #a8e6cf;
  --flow-neutral: #7c857b;
  --flow-blue: #2a7d6b;
  --flow-cyan: #2e8f7d;
  --flow-sky: #8edbb3;
  --flow-teal: #3aa389;
  --flow-indigo: #4f5765;
  --flow-slate: #7c857b;

  /* 文字颜色（亮） */
  --text-primary: #0f1a14;
  --text-secondary: #2a332d;
  --text-muted: #4a5650;
  --text-accent: #2f7f60;
  --text-success: #2f7f60;
  --text-warning: #8c6b2f;
  --text-error: #b94a4a;
  --text-on-primary: #ffffff;
}

/* 自然森林主题 - 夜间模式 */
[data-theme="forest"][data-color-scheme="dark"] {
  --background: linear-gradient(135deg, #0b1411 0%, #0f1e18 35%, #11251f 70%, #0b1411 100%);
  --foreground: #e7f0eb;

  /* 夜间材质与阴影 */
  --card-glass: rgba(10, 20, 17, 0.85);
  --card-border: rgba(120, 200, 160, 0.25);
  --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 0 20px rgba(47, 127, 96, 0.1);

  /* 文本颜色（暗） */
  --text-primary: #e7f0eb;
  --text-secondary: #c9ded4;
  --text-muted: #93a39b;
  --text-accent: #90d3b3;
  --text-success: #79cfa8;
  --text-warning: #f59e0b;
  --text-error: #ef4444;
  --text-on-primary: #ffffff;
}

  /* Dopamine 主题（明色） */
[data-theme="dopamine"] {
  /* 中性色（完全对齐现有基准，保证对比度与可用性） */
  --background: linear-gradient(135deg, 
    #fef7f1 0%,     /* 微妙的橙色傾向 */
    #fff9f7 25%,    /* 温暖的粉色傾向 */
    #fef3f1 50%,    /* 柔和的粉橙色 */
    #fff8f6 75%,    /* 轻微的橙色调 */
    #fffbfa 100%    /* 接近纯白但带温暖 */
  );
  --foreground: #0f172a;

  /* 主题色彩变量 - 对齐现有命名 */
  --primary-50: #fff4f1;
  --primary-100: #ffe6df;
  --primary-200: #ffccc0;
  --primary-300: #ffa892;
  --primary-400: #ff8260;
  --primary-500: var(--dopamine-orange);   /* 主色 */
  --primary-600: #E25434;
  --primary-700: #c73e1c;
  --primary-800: #a53316;
  --primary-900: #8b2f17;
  --primary-950: #4c1408;

  /* 增强对比度的替代色（确保WCAG AA合规） */
  --dopamine-orange-accessible: #D14424;   /* 对比度改进版 */
  --dopamine-indigo-accessible: #4F46E5;   /* 对比度改进版 */

  /* 思维卡片背景 - 对齐现有命名 */
  --card-glass: rgba(254, 249, 247, 0.95);  /* 微妙温暖色调 */
  --card-border: rgba(255, 107, 71, 0.4);   /* 增强边框颜色 */
  --card-shadow: 0 8px 32px 0 rgba(255, 107, 71, 0.2), 0 2px 8px 0 rgba(255, 107, 71, 0.1);

  /* 文本颜色 - 对齐现有命名 */
  --text-primary: #0f172a;
  --text-secondary: #6b7280;
  --text-muted: #6b7280;
  --text-accent: var(--dopamine-indigo);
  --text-success: var(--dopamine-green);
  --text-warning: var(--dopamine-yellow);
  --text-error: #b91c1c;
  --text-on-primary: #ffffff;

  /* 动态色彩变量 - 对齐现有命名（使用可访问性更好的颜色） */
  --dynamic-primary: var(--dopamine-orange-accessible);
  --dynamic-secondary: #ff825f; /* hover 状态 */
  --dynamic-accent: var(--dopamine-light-green);
  --dynamic-glow: rgba(209, 68, 36, 0.3);
  --dynamic-pulse: rgba(255, 130, 95, 0.2);

  /* 思维流动主题色彩系统 - 对齐现有命名 */
  --mind-flow-primary: linear-gradient(135deg, var(--dopamine-orange) 0%, #E25434 100%);
  --mind-flow-secondary: linear-gradient(135deg, var(--dopamine-green) 0%, #00B873 100%);
  --mind-flow-accent: linear-gradient(135deg, var(--dopamine-light-green) 0%, #76B83D 100%);
  --mind-flow-neutral: linear-gradient(135deg, #64748b 0%, #475569 100%);

  /* Flow 色彩映射 - 对齐现有命名 */
  --flow-primary: var(--dopamine-orange);
  --flow-secondary: var(--dopamine-green);
  --flow-accent: var(--dopamine-light-green);
  --flow-neutral: #64748b;
  --flow-blue: var(--dopamine-indigo);
  --flow-cyan: var(--dopamine-green);     /* 映射到绿色 */
  --flow-sky: var(--dopamine-light-green);
  --flow-teal: var(--dopamine-green);
  --flow-indigo: var(--dopamine-indigo);
  --flow-slate: #64748b;

  /* 保留温暖色调作为点缀 - 对齐现有命名 */
  --flow-orange: var(--dopamine-orange);
  --flow-coral: #ff6b6b;
  --flow-amber: var(--dopamine-yellow);
  --flow-rose: #ff6b9d;

  /* 组件卡片专色（与图片参考一一对应） */
  --card-processor: var(--dopamine-orange);
  --card-memory: var(--dopamine-green);
  --card-storage: var(--dopamine-light-green);
  --card-connection: var(--dopamine-indigo);
  --card-compact: var(--dopamine-yellow);

  /* 项目色彩映射 - 对齐现有命名 */
  --project-fsd: var(--dopamine-orange);
  --project-aiec: var(--dopamine-indigo);
  --project-training: var(--dopamine-green);
  --project-meeting: var(--dopamine-yellow);
  --project-empowerment: var(--dopamine-light-green);
  --project-other: #6b7280;

  /* 阴影系统 - 对齐现有命名 */
  --shadow-glow: 0 0 20px rgba(255, 107, 71, 0.3);
}

/* Dopamine 主题（暗色） */
[data-theme="dopamine"][data-color-scheme="dark"] {
  /* 中性色 - 对齐现有命名 */
  --background: linear-gradient(135deg, #0f172a 0%, #1e293b 30%, #334155 70%, #475569 100%);
  --foreground: #f1f5f9;

  /* 思维卡片背景 - 对齐现有命名 */
  --card-glass: rgba(15, 23, 42, 0.85);
  --card-border: rgba(255, 107, 71, 0.3);
  --card-shadow: 0 8px 32px 0 rgba(255, 107, 71, 0.2);

  /* 文本颜色 - 对齐现有命名 */
  --text-primary: #f1f5f9;
  --text-secondary: #cbd5e1;
  --text-muted: #94a3b8;
  --text-accent: var(--dopamine-indigo);
  --text-success: var(--dopamine-green);
  --text-warning: var(--dopamine-yellow);
  --text-error: #ef4444;
  --text-on-primary: #ffffff;

  /* 动态色彩变量 - 对齐现有命名 */
  --dynamic-primary: var(--dopamine-orange);
  --dynamic-secondary: #ff825f;
  --dynamic-accent: var(--dopamine-light-green);
  --dynamic-glow: rgba(255, 107, 71, 0.4);  /* 暗色下增强发光 */
  --dynamic-pulse: rgba(255, 130, 95, 0.3);

  /* 思维流动主题色彩系统 - 对齐现有命名 */
  --mind-flow-primary: linear-gradient(135deg, var(--dopamine-orange) 0%, #E25434 100%);
  --mind-flow-secondary: linear-gradient(135deg, var(--dopamine-green) 0%, #00B873 100%);
  --mind-flow-accent: linear-gradient(135deg, var(--dopamine-light-green) 0%, #76B83D 100%);
  --mind-flow-neutral: linear-gradient(135deg, #94a3b8 0%, #475569 100%);

  /* Flow 色彩映射 - 对齐现有命名 */
  --flow-primary: var(--dopamine-orange);
  --flow-secondary: var(--dopamine-green);
  --flow-accent: var(--dopamine-light-green);
  --flow-neutral: #94a3b8;
  --flow-blue: var(--dopamine-indigo);
  --flow-cyan: var(--dopamine-green);
  --flow-sky: var(--dopamine-light-green);
  --flow-teal: var(--dopamine-green);
  --flow-indigo: var(--dopamine-indigo);
  --flow-slate: #94a3b8;

  /* 保留温暖色调作为点缀 - 对齐现有命名 */
  --flow-orange: var(--dopamine-orange);
  --flow-coral: #ff6b6b;
  --flow-amber: var(--dopamine-yellow);
  --flow-rose: #ff6b9d;

  /* 组件卡片专色（与图片参考一一对应） */
  --card-processor: var(--dopamine-orange);
  --card-memory: var(--dopamine-green);
  --card-storage: var(--dopamine-light-green);
  --card-connection: var(--dopamine-indigo);
  --card-compact: var(--dopamine-yellow);

  /* 项目色彩映射 - 对齐现有命名 */
  --project-fsd: var(--dopamine-orange);
  --project-aiec: var(--dopamine-indigo);
  --project-training: var(--dopamine-green);
  --project-meeting: var(--dopamine-yellow);
  --project-empowerment: var(--dopamine-light-green);
  --project-other: #94a3b8;

  /* 阴影系统 - 对齐现有命名 */
  --shadow-glow: 0 0 20px rgba(255, 107, 71, 0.4);
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

/* 注释掉默认的深色主题媒体查询，让主题系统完全控制 */
/*
@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}
*/

html {
  background: var(--background);
}

body {
  background: var(--background);
  min-height: 100vh;
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
  transition: all 0.3s ease;
}

/* 主题背景仅在特定组件中应用，避免全局渐变 */

/* 节能模式样式 */
[data-energy-mode="eco"],
[data-reduce-animations="true"] {
  --animation-duration-multiplier: 0.5;
  --blur-intensity: 4px;
  --shadow-intensity: 0.3;
  --enable-particles: 0;
  --enable-hover-effects: 0;
  --animation-play-state: paused;
}

/* 用户偏好：减少动效 */
@media (prefers-reduced-motion: reduce) {
  :root {
    --animation-duration-multiplier: 0;
    --animation-play-state: paused;
  }
}

/* 思维流动动画系统 */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes mindFlow {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

@keyframes thoughtBubble {
  0%, 100% {
    transform: translateY(0px) scale(1);
    opacity: 0.8;
  }
  50% {
    transform: translateY(-8px) scale(1.02);
    opacity: 1;
  }
}

@keyframes glassShimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

@keyframes breathe {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, calc(0.37 * var(--shadow-intensity)));
  }
  50% {
    transform: scale(1.01);
    box-shadow: 0 12px 40px 0 rgba(31, 38, 135, calc(0.5 * var(--shadow-intensity)));
  }
}

@keyframes flowingGradient {
  0% {
    background-position: 0% 50%;
    filter: hue-rotate(0deg);
  }
  25% {
    background-position: 100% 50%;
    filter: hue-rotate(90deg);
  }
  50% {
    background-position: 100% 50%;
    filter: hue-rotate(180deg);
  }
  75% {
    background-position: 0% 50%;
    filter: hue-rotate(270deg);
  }
  100% {
    background-position: 0% 50%;
    filter: hue-rotate(360deg);
  }
}

/* 动画类 - 支持节能模式 */
.animate-fadeInUp {
  animation: fadeInUp calc(0.6s * var(--animation-duration-multiplier)) cubic-bezier(0.4, 0, 0.2, 1);
  animation-play-state: var(--animation-play-state);
}

.animate-mindFlow {
  background-size: 200% 200%;
  animation: mindFlow calc(8s * var(--animation-duration-multiplier)) ease-in-out infinite;
  animation-play-state: var(--animation-play-state);
}

.animate-thoughtBubble {
  animation: thoughtBubble calc(4s * var(--animation-duration-multiplier)) ease-in-out infinite;
  animation-play-state: var(--animation-play-state);
}

/* animate-glassShimmer 已移除 - 节能优化 */

.animate-breathe {
  animation: breathe calc(3s * var(--animation-duration-multiplier)) ease-in-out infinite;
  animation-play-state: var(--animation-play-state);
}

.animate-flowingGradient {
  background-size: 300% 300%;
  animation: flowingGradient calc(12s * var(--animation-duration-multiplier)) ease-in-out infinite;
  animation-play-state: var(--animation-play-state);
}

/* 玻璃拟态效果 - 支持节能模式 */
.glass-card {
  background: var(--card-glass);
  backdrop-filter: blur(var(--blur-intensity));
  -webkit-backdrop-filter: blur(var(--blur-intensity));
  border: 1px solid var(--card-border);
  box-shadow: var(--card-shadow);
  border-radius: 16px;
  transition: all calc(0.3s * var(--animation-duration-multiplier)) ease;
}

/* 柔性玻璃渐变边框（替代生硬的实线边框） */
.glass-border-soft {
  /* 使用双层背景实现渐变边框，同时保持内容背景独立 */
  border: 1px solid transparent;
  background:
    linear-gradient(var(--card-glass), var(--card-glass)) padding-box,
    linear-gradient(135deg,
      color-mix(in oklab, var(--card-border) 60%, transparent),
      color-mix(in oklab, var(--flow-primary) 35%, transparent)
    ) border-box;
  box-shadow: var(--card-shadow);
}

.glass-border-soft:hover {
  background:
    linear-gradient(var(--card-glass), var(--card-glass)) padding-box,
    linear-gradient(135deg,
      color-mix(in oklab, var(--card-border) 70%, transparent),
      color-mix(in oklab, var(--flow-primary) 45%, transparent)
    ) border-box;
}

/* glass-card悬停效果已移除 */

/* 思维流动背景 */
.mind-flow-bg {
  background: linear-gradient(
    135deg,
    rgba(33, 150, 243, 0.08) 0%,
    rgba(0, 188, 212, 0.08) 25%,
    rgba(63, 81, 181, 0.08) 50%,
    rgba(0, 150, 136, 0.08) 75%,
    rgba(0, 229, 255, 0.08) 100%
  );
  background-size: 300% 300%;
}

/* 流畅的过渡效果 */
.transition-smooth {
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.transition-glass {
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* 思维卡片特效 */
.thought-card {
  position: relative;
  overflow: hidden;
}

.thought-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.3),
    transparent
  );
  transition: left 0.6s;
}



/* 输入框特效 - 支持节能模式 */
.mind-input {
  background: rgba(33, 150, 243, 0.05);
  border: 1px solid rgba(33, 150, 243, 0.3);
  border-radius: 12px;
  transition: all calc(0.3s * var(--animation-duration-multiplier)) ease;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.mind-input:focus {
  background: rgba(255, 255, 255, 0.2);
  border-color: #06b6d4;
  box-shadow: 0 0 20px rgba(79, 172, 254, calc(0.3 * var(--shadow-intensity)));
  transform: scale(calc(1 + 0.01 * var(--enable-hover-effects)));
}

/* 流式输出打字机效果 */
@keyframes blink {
  0%, 50% {
    opacity: 1;
  }
  51%, 100% {
    opacity: 0;
  }
}

.typing-cursor {
  animation: blink 1s infinite;
}

/* 消息气泡增强样式 */


/* 打字机光标优化动画 */
@keyframes typing-blink {
  0%, 45% {
    opacity: 1;
    transform: scaleY(1);
  }
  46%, 55% {
    opacity: 0;
    transform: scaleY(0.8);
  }
  56%, 100% {
    opacity: 1;
    transform: scaleY(1);
  }
}

.typing-cursor {
  animation: typing-blink 1.2s infinite;
  transform-origin: center;
}

/* 消息气泡动画入场效果 */
@keyframes message-slide-in-left {
  from {
    opacity: 0;
    transform: translateX(-30px) translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateX(0) translateY(0) scale(1);
  }
}

@keyframes message-slide-in-right {
  from {
    opacity: 0;
    transform: translateX(30px) translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateX(0) translateY(0) scale(1);
  }
}

/* 加载状态的呼吸效果 */
@keyframes loading-breathe {
  0%, 100% {
    opacity: 0.6;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.05);
  }
}

/* 浮动几何形状动画 */
@keyframes float-slow {
  0%, 100% {
    transform: translateY(0px) translateX(0px) rotate(0deg);
  }
  25% {
    transform: translateY(-20px) translateX(10px) rotate(1deg);
  }
  50% {
    transform: translateY(0px) translateX(20px) rotate(0deg);
  }
  75% {
    transform: translateY(10px) translateX(5px) rotate(-1deg);
  }
}

/* 动态光斑脉冲效果 */
@keyframes gentle-pulse {
  0%, 100% {
    opacity: 0.25;
    transform: scale(1);
  }
  25% {
    opacity: 0.35;
    transform: scale(1.02);
  }
  50% {
    opacity: 0.3;
    transform: scale(1.05);
  }
  75% {
    opacity: 0.4;
    transform: scale(1.03);
  }
}

/* Phase 2: 高级玉瓃拟态材质系统 */

/* 高级玉瓃卡片 - 增强深度感 */
.glass-card-premium {
  background: rgba(255, 255, 255, var(--glass-opacity));
  backdrop-filter: blur(var(--blur-intensity)) saturate(1.2);
  -webkit-backdrop-filter: blur(var(--blur-intensity)) saturate(1.2);
  border: 1px solid rgba(255, 255, 255, var(--glass-border-opacity));
  box-shadow: 
    0 12px 40px -8px var(--depth-shadow),
    0 0 0 1px var(--surface-highlight) inset,
    0 2px 16px -4px var(--material-glow);
  border-radius: 20px;
  position: relative;
  transition: all calc(0.4s * var(--animation-duration-multiplier)) cubic-bezier(0.16, 1, 0.3, 1);
}

/* 玉瓃卡片悬停效果已移除 */

/* 轻量级玉瓃效果 */
.glass-card-light {
  background: rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(12px) saturate(1.1);
  -webkit-backdrop-filter: blur(12px) saturate(1.1);
  border: 1px solid rgba(255, 255, 255, 0.4);
  box-shadow: 
    0 8px 24px -6px rgba(0, 0, 0, 0.08),
    0 0 0 1px rgba(255, 255, 255, 0.3) inset;
  border-radius: 16px;
  transition: all 0.3s ease;
}

/* 深度玉瓃效果 */
.glass-card-deep {
  background: var(--card-glass);
  backdrop-filter: blur(24px) saturate(1.3);
  -webkit-backdrop-filter: blur(24px) saturate(1.3);
  border: 1px solid var(--card-border);
  box-shadow: 
    0 16px 48px -12px var(--shadow-primary),
    0 0 0 2px var(--card-border) inset,
    0 4px 20px -4px var(--flow-primary-alpha);
  border-radius: 24px;
  transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

/* 表面高光效果 */
.surface-highlight::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--surface-highlight), transparent);
  border-radius: inherit;
}

/* 材质反光效果 */
.material-reflection {
  position: relative;
  overflow: hidden;
}

.material-reflection::after {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background: linear-gradient(
    45deg,
    transparent 30%,
    rgba(255, 255, 255, 0.1) 50%,
    transparent 70%
  );
  border-radius: inherit;
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}



@keyframes shimmer {
  0% {
    transform: translateX(-100%) rotate(45deg);
  }
  100% {
    transform: translateX(100%) rotate(45deg);
  }
}

/* Z轴深度分层系统 */
.depth-layer-1 {
  z-index: 1;
  transform: translateZ(0);
}

.depth-layer-2 {
  z-index: 2;
  transform: translateZ(10px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
}

.depth-layer-3 {
  z-index: 3;
  transform: translateZ(20px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}

.depth-layer-4 {
  z-index: 4;
  transform: translateZ(30px);
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15);
}

/* 材质质感动画 */
@keyframes material-float {
  0%, 100% {
    transform: translateY(0px) translateZ(0px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
  }
  50% {
    transform: translateY(-4px) translateZ(5px);
    box-shadow: 0 16px 40px rgba(0, 0, 0, 0.12);
  }
}

.animate-material-float {
  animation: material-float 6s ease-in-out infinite;
}

/* 优化后的用户消息气泡设计 - 简约现代风格 */
.user-message-bubble {
  /* 使用纯色背景，提升可读性 */
  background: var(--flow-primary);
  color: white;
  /* 不对称圆角，增强对话感 */
  border-radius: 16px 16px 4px 16px;
  /* 简化阴影效果 */
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
  border: none;
  position: relative;
  /* 优化过渡效果 */
  transition: box-shadow 0.2s ease, transform 0.2s ease;
  /* 移除过度装饰 */
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  overflow: visible;
}

/* 轻微的悬停效果 */
.user-message-bubble:hover {
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
  transform: translateY(-1px);
}

/* 移除所有伪元素光效，保持简洁 */
.user-message-bubble::before,
.user-message-bubble::after {
  display: none;
}

/* 简化的消息气泡入场动画 */
@keyframes message-bubble-entrance {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 确保消息内容可读性 */
.user-message-bubble > div {
  position: relative;
  z-index: 1;
  color: white;
  text-shadow: none;
}

/* ========================================
   Phase 3: 高级交互与微动画系统
   ======================================== */

/* 智能悬停反馈系统 */
.interactive-element {
  position: relative;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: pointer;
}

.interactive-element:hover {
  transform: translateY(-2px);
}

.interactive-element:active {
  transform: translateY(0px) scale(0.98);
  transition: all 0.1s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 移除复杂的涟漪和交互效果，保持简洁 */

/* 智能按钮动画系统 */
.smart-button {
  position: relative;
  overflow: hidden;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-radius: 12px;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  transform: translateZ(0);
}

.smart-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.4),
    transparent
  );
  transition: left 0.5s;
}



.smart-button:active {
  transform: translateY(0px) scale(0.98);
  transition: all 0.1s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 输入框增强交互 */
.enhanced-input {
  position: relative;
  background: rgba(255, 255, 255, 0.95);
  border: 2px solid rgba(14, 165, 233, 0.2);
  border-radius: 16px;
  padding: 16px 20px;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  color: var(--text-primary);
}

/* 暗色模式下的输入框样式 */
[data-color-scheme="dark"] .enhanced-input {
  background: rgba(30, 41, 59, 0.95);
  border: 2px solid rgba(14, 165, 233, 0.3);
  color: var(--text-primary);
}

[data-color-scheme="dark"] .enhanced-input:focus {
  border-color: rgba(14, 165, 233, 0.5);
  background: rgba(30, 41, 59, 1);
  box-shadow: 
    0 12px 40px -8px rgba(14, 165, 233, 0.3),
    0 0 0 4px rgba(14, 165, 233, 0.15);
}

.enhanced-input::before {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--flow-primary), var(--flow-secondary));
  transform: translateX(-50%);
  transition: width 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.enhanced-input:focus::before {
  width: 100%;
}

.enhanced-input:focus {
  border-color: rgba(14, 165, 233, 0.4);
  background: rgba(255, 255, 255, 1);
  transform: translateY(-2px);
  box-shadow: 
    0 12px 40px -8px rgba(14, 165, 233, 0.2),
    0 0 0 4px rgba(14, 165, 233, 0.1);
}

/* 卡片悬停微交互 */
.card-micro-interaction {
  transform-origin: center;
}

/* 文本选择优化 */
::selection {
  background: rgba(14, 165, 233, 0.3);
  color: var(--text-primary);
}

::-moz-selection {
  background: rgba(14, 165, 233, 0.3);
  color: var(--text-primary);
}

/* 滚动条美化 */
::-webkit-scrollbar {
  width: 4px;
}

::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.02);
  border-radius: 2px;
}

::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
  border-radius: 2px;
  transition: all 0.3s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.25);
}

/* 加载状态增强动画 */
.loading-enhanced {
  position: relative;
  overflow: hidden;
}

.loading-enhanced::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(14, 165, 233, 0.3),
    transparent
  );
  animation: loading-shimmer 2s infinite;
}

@keyframes loading-shimmer {
  0% {
    left: -100%;
  }
  100% {
    left: 100%;
  }
}

@keyframes fade-in {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fade-in 1s ease-out forwards;
}

/* 智能提示动画 */
.tooltip-enhanced {
  position: relative;
  cursor: help;
}

.tooltip-enhanced::before {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(-8px);
  background: rgba(0, 0, 0, 0.9);
  color: white;
  padding: 8px 12px;
  border-radius: 8px;
  font-size: 12px;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: 1000;
}

.tooltip-enhanced:hover::before {
  opacity: 1;
  transform: translateX(-50%) translateY(-4px);
}

/* 响应式交互禁用（触摸设备） */
@media (hover: none) and (pointer: coarse) {
  .smart-button:hover {
    transform: none;
    box-shadow: none;
  }
}

/* ========================================
   Phase 4: 响应式适配与性能优化
   ======================================== */

/* ===== 响应式布局系统 ===== */

/* 移动端优先的响应式设计 */
@media (max-width: 640px) {
  /* 移动端消息气泡优化 */
  .user-message-bubble {
    max-width: 85%;
    border-radius: 18px 18px 4px 18px;
    padding: 12px 16px;
    font-size: 14px;
    box-shadow: 
      0 4px 12px -4px rgba(14, 165, 233, 0.3),
      0 2px 6px -2px rgba(14, 165, 233, 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }
  
  .glass-card-deep {
    max-width: 85%;
    border-radius: 18px;
    padding: 12px 16px;
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
  }
  
  /* 移动端输入框优化 */
  .enhanced-input {
    border-radius: 12px;
    padding: 12px 16px;
    font-size: 16px; /* 防止iOS缩放 */
  }
  
  /* 移动端卡片微交互简化 */
  .card-micro-interaction {
    transform: none;
    transition: box-shadow 0.2s ease;
  }
  
  .card-micro-interaction:active {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  }
  
  /* 移动端滚动条隐藏 */
  ::-webkit-scrollbar {
    display: none;
  }
  
  /* 移动端字体大小调整 */
  .text-sm {
    font-size: 13px;
  }
  
  .text-base {
    font-size: 15px;
  }
}

/* 平板端适配 */
@media (min-width: 641px) and (max-width: 1024px) {
  .user-message-bubble {
    max-width: 75%;
    border-radius: 20px 20px 5px 20px;
  }
  
  .glass-card-deep {
    max-width: 75%;
    border-radius: 20px;
  }
  
  /* 平板端侧边栏优化 */
  .sidebar {
    width: 280px;
  }
}

/* 大屏幕优化 */
@media (min-width: 1440px) {
  .user-message-bubble {
    max-width: 60%;
  }
  
  .glass-card-deep {
    max-width: 60%;
  }
  
  /* 大屏幕增强效果 */
  .enhanced-input:focus {
    box-shadow: 
      0 16px 50px -12px rgba(14, 165, 233, 0.25),
      0 0 0 6px rgba(14, 165, 233, 0.08);
  }
}

/* 超宽屏优化 */
@media (min-width: 1920px) {
  .user-message-bubble {
    max-width: 55%;
  }
  
  .glass-card-deep {
    max-width: 55%;
  }
}

/* ===== 性能优化系统 ===== */

/* GPU加速优化 */
.gpu-accelerated {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
  will-change: transform;
}

/* 内容可见性优化 */
.content-visibility-auto {
  content-visibility: auto;
  contain-intrinsic-size: 200px;
}

/* 懒加载优化 */
.lazy-load {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.6s ease, transform 0.6s ease;
}

.lazy-load.loaded {
  opacity: 1;
  transform: translateY(0);
}

/* 减少重绘优化 */
.optimize-repaint {
  contain: layout style paint;
}

/* 动画性能优化 */
@media (prefers-reduced-motion: no-preference) {
  .performance-animation {
    animation-fill-mode: both;
    animation-duration: var(--animation-duration, 0.3s);
    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }
}

/* 触摸设备优化 */
@media (hover: none) {
  /* 触摸设备悬停效果已移除 */
  
  /* 触摸反馈优化 */
  .touch-feedback:active {
    background: rgba(14, 165, 233, 0.1);
    transform: scale(0.98);
    transition: all 0.1s ease;
  }
}

/* 高对比度模式支持 */
@media (prefers-contrast: high) {
  .user-message-bubble {
    border: 2px solid #0284c7;
    background: #0369a1;
  }
  
  .glass-card-deep {
    border: 2px solid var(--flow-primary);
    background: var(--card-glass);
  }
  
  ::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
  }
  
  ::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
  }
}

/* 暗色模式性能优化 */
@media (prefers-color-scheme: dark) {
  .user-message-bubble {
    filter: brightness(0.9);
  }
  
  .loading-enhanced::after {
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.1),
      transparent
    );
  }
}

/* ===== 内存与渲染优化 ===== */

/* 复合图层优化 */
.composite-layer {
  transform: translateZ(0);
  will-change: transform, opacity;
}

/* 文本渲染优化 */
.optimized-text {
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* 图像优化 */
.optimized-image {
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
}

/* 滚动性能优化 */
.scroll-optimized {
  overflow-anchor: none;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

/* 动画暂停控制 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  .user-message-bubble::before,
  .user-message-bubble::after {
    animation: none;
  }
}

/* 弱网环境优化 */
@media (prefers-reduced-data: reduce) {
  .user-message-bubble::before,
  .user-message-bubble::after {
    display: none;
  }
  
  .glass-card-premium {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background: rgba(255, 255, 255, 0.9);
  }
}

/* ===== 特定设备优化 ===== */

/* iPhone优化 */
@supports (-webkit-touch-callout: none) {
  .user-message-bubble {
    -webkit-transform: translateZ(0);
  }
  
  .enhanced-input {
    border-radius: 16px;
    font-size: 16px;
  }
}

/* Safari优化 */
@supports (-webkit-appearance: none) {
  .glass-card-deep {
    -webkit-backdrop-filter: blur(24px);
  }
}

/* Chrome优化 */
@supports (backdrop-filter: blur(1px)) {
  .enhanced-backdrop {
    backdrop-filter: blur(20px) saturate(120%);
  }
}

/* Firefox优化 */
@-moz-document url-prefix() {
  .user-message-bubble {
    background: linear-gradient(135deg, var(--flow-primary), var(--flow-secondary));
  }
  
  .glass-card-deep {
    background: var(--card-glass);
  }
}

/* Edge优化 */
@supports (-ms-ime-align: auto) {
  .enhanced-input {
    border-radius: 12px;
  }
}

/* ===== 可访问性优化 ===== */

/* 聚焦指示器增强 */
.focus-enhanced:focus {
  outline: 3px solid rgba(14, 165, 233, 0.5);
  outline-offset: 2px;
}

/* 键盘导航优化 */
.keyboard-navigable {
  position: relative;
}

.keyboard-navigable:focus-visible {
  box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.5);
}

/* 屏幕阅读器优化 */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* 高对比度文本 */
.high-contrast-text {
  color: contrast(var(--background));
}

/* ===== 打印优化 ===== */
@media print {
  .user-message-bubble {
    background: #f0f9ff !important;
    color: #0c4a6e !important;
    border: 1px solid #0284c7 !important;
    box-shadow: none !important;
  }
  
  .glass-card-deep {
    background: #fff !important;
    border: 1px solid #e5e7eb !important;
    box-shadow: none !important;
  }
  
  /* 隐藏装饰性元素 */
  .user-message-bubble::before,
  .user-message-bubble::after {
    display: none;
  }
}
